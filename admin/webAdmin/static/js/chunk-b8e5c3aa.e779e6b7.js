(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b8e5c3aa"],{6599:function(t,e,a){},"78ca":function(t,e,a){"use strict";a("6599")},ad8f:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"e",(function(){return r})),a.d(e,"g",(function(){return s})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return p})),a.d(e,"h",(function(){return o})),a.d(e,"f",(function(){return c})),a.d(e,"a",(function(){return u})),a.d(e,"i",(function(){return d}));var i=a("b775");function n(t){return Object(i["a"])({url:"/admin/api/v1/application/detail",method:"get"})}function r(t){return Object(i["a"])({url:"/admin/api/v1/application/list",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/admin/api/v1/channel/list",method:"get",params:t})}function l(t){return Object(i["a"])({url:"/admin/api/v1/channel/create",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/admin/api/v1/channel/del",method:"delete",params:t})}function o(t){return Object(i["a"])({url:"/admin/api/v1/channel/statistic",method:"get",params:t})}function c(t){return Object(i["a"])({url:"/admin/api/v1/application/statistic",method:"get",params:t})}function u(t){return Object(i["a"])({url:"/admin/api/v1/application/create",method:"post",params:t})}function d(t){return Object(i["a"])({url:"/admin/api/v1/task/list",method:"get",params:t})}},d71d:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"20px"}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("div",{staticClass:"search"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","popper-class":"date-style","picker-options":t.pickerOptions},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}})],1)]),a("el-form-item",[a("el-button",{attrs:{type:t.btnTypes.all},on:{click:t.allClick}},[t._v("all")]),a("el-button",{attrs:{type:t.btnTypes.android},on:{click:t.androidClick}},[t._v("Android")]),a("el-button",{attrs:{type:t.btnTypes.iOS},on:{click:t.iOSClick}},[t._v("iOS")])],1)],1),a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[t._v(" 访问量 "),a("p",{staticClass:"center"},[t._v(t._s(t.appData.web_visit_pv?t.appData.web_visit_pv:0))])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[t._v(" 点击量 "),a("p",{staticClass:"center"},[t._v(t._s(t.appData.web_click_pv?t.appData.web_click_pv:0))])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[t._v(" 安装量 "),a("p",{staticClass:"center"},[t._v(t._s(t.appData.app_install_pv?t.appData.app_install_pv:0))])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[t._v(" 访问量(排重后) "),a("p",{staticClass:"center"},[t._v(t._s(t.appData.web_visit_uv?t.appData.web_visit_uv:0))])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[t._v(" 点击量(排重后) "),a("p",{staticClass:"center"},[t._v(t._s(t.appData.web_click_uv?t.appData.web_click_uv:0))])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[t._v(" 安装量(排重后) "),a("p",{staticClass:"center"},[t._v(t._s(t.appData.app_install_uv?t.appData.app_install_uv:0))])])],1)],1),a("div",[a("BaseEchart",{staticStyle:{"margin-top":"20px"},attrs:{width:"1000px",height:"500px",option:t.echartOption}})],1)],1)},n=[],r=(a("e9c4"),a("a15b"),a("ad8f")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width},attrs:{id:t.id}})},l=[],p=a("313e");function o(t,e,a){var i,n,r,s,l,p=function p(){var o=+new Date-s;o<e&&o>0?i=setTimeout(p,e-o):(i=null,a||(l=t.apply(r,n),i||(r=n=null)))};return function(){for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];r=this,s=+new Date;var u=a&&!i;return i||(i=setTimeout(p,e)),u&&(l=t.apply(r,o),r=o=null),l}}var c={data:function(){return{$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{initListener:function(){var t=this;this.$_resizeHandler=o((function(){t.resize()}),100),window.addEventListener("resize",this.$_resizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null},resize:function(){var t=this.chart;t&&t.resize()}}},u={name:"BaseEchart",mixins:[c],props:{className:{type:String,default:"base-echart"},id:{type:String,default:"base-echart"},width:{type:String,default:"600px"},height:{type:String,default:"300px"},option:{type:Object,required:!0}},data:function(){return{chart:null,style:{}}},watch:{option:function(){this.updateChart()}},mounted:function(){this.initChart(),this.updateChart()},created:function(){},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=p["a"](document.getElementById(this.id))},updateChart:function(){this.chart.setOption(this.option)}}},d=u,h=a("2877"),m=Object(h["a"])(d,s,l,!1,null,"68c4356e",null),f=m.exports,v={components:{BaseEchart:f},data:function(){var t=this;return{appData:{time_range_list:[],web_visit_uv:0,web_click_uv:0,app_install_uv:0,web_visit_pv:0,web_click_pv:0,app_install_pv:0},dateTime:"",timeStart:0,timeEnd:0,platformFilter:0,btnTypes:{all:"default",android:"default",iOS:"default"},echartOption:{},timeOptionRange:"",pickerOptions:{onPick:function(e){e.minDate&&!e.maxDate&&(t.timeOptionRange=e.minDate),e.maxDate&&(t.timeOptionRange=null)},disabledDate:function(e){var a=t.timeOptionRange,i=26784e5;if(a)return a.getTime()+i>Date.now()-864e4?e.getTime()>Date.now()-864e4||e.getTime()<a.getTime()-i:e.getTime()>a.getTime()+i||e.getTime()<a.getTime()-i}}}},watch:{dateTime:function(t,e){if(console.log("dateTime:"+JSON.stringify(t)),t&&t!==e){var a=t[0],i=t[1],n=60*(new Date).getTimezoneOffset()*1e3,r=new Date(a).getTime();r+=n;var s=new Date(i).getTime();s+=n,this.timeStart=r/1e3;var l=s/1e3;l=l+86400-1,this.timeEnd=l,console.log("start : "+this.timeStart+"end:"+this.timeEnd),this.fetchData()}}},created:function(){this.dateTime=this.getDefaultDateTime()},methods:{fetchData:function(){var t=this;this.listLoading=!0;var e={SystemType:this.platformFilter,StartTime:this.timeStart,OverTime:this.timeEnd};Object(r["f"])(e).then((function(e){console.log("getAppStatistic:"+JSON.stringify(e)),t.appData=e.data,t.listLoading=!1,t.setupChartsData()}))},isSameDay:function(t,e){var a=e.split("-"),i=new Date(a[0],a[1]-1,a[2]);return t.getFullYear()===i.getFullYear()&&t.getMonth()===i.getMonth()&&t.getDate()===i.getDate()},setupChartsData:function(){for(var t=this.getDaysBetween(1e3*this.timeStart,1e3*this.timeEnd),e=[],a=[],i=[],n=[],r=[],s=[],l=0;l<t.length;l++){var p=t[l],o=!1;if(this.appData.time_range_list)for(var c=0;c<this.appData.time_range_list.length;c++){var u=this.appData.time_range_list[c];if(this.isSameDay(p,u.time)){o=!0;var d=[p,u.web_visit_pv];e.push(d),d=[p,u.web_click_pv],a.push(d),d=[p,u.app_install_pv],i.push(d),d=[p,u.web_visit_uv],n.push(d),d=[p,u.web_click_uv],r.push(d),d=[p,u.app_install_uv],s.push(d);break}}else o=!1;!1===o&&(e.push([p,0]),a.push([p,0]),i.push([p,0]),n.push([p,0]),r.push([p,0]),s.push([p,0]))}this.echartOption={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},xAxis:{type:"time",axisLabel:{interale:0,formatter:function(t){var e=new Date(t);return[e.getMonth()+1,e.getDate()].join("-")}}},yAxis:{type:"value",axisLabel:{formatter:"{value}"}},legend:{data:["访问量","点击量","安装量","访问量(排重后)","点击量(排重后)","安装量(排重后)"]},series:[{data:e,type:"line",name:"访问量"},{data:a,type:"line",name:"点击量"},{data:i,type:"line",name:"安装量"},{data:n,type:"line",name:"访问量(排重后)"},{data:r,type:"line",name:"点击量(排重后)"},{data:s,type:"line",name:"安装量(排重后)"}]}},getDaysBetween:function(t,e){var a=[],i=t,n=e-t,r=864e5,s=Math.floor(n/r);if(s<1)return[];var l=Math.ceil(s/50);while(i<=e)a.push(new Date(i)),i+=864e5*l;return a},getRandom:function(){var t=10,e=200,a=e-t,i=Math.random()*a,n=Math.round(i)+t;return n},allClick:function(){this.platformFilter=0,this.btnTypes.all="primary",this.btnTypes.iOS="default",this.btnTypes.android="default",this.fetchData()},androidClick:function(){this.platformFilter=1,this.btnTypes.all="default",this.btnTypes.iOS="default",this.btnTypes.android="primary",this.fetchData()},iOSClick:function(){this.platformFilter=2,this.btnTypes.all="default",this.btnTypes.iOS="primary",this.btnTypes.android="default",this.fetchData()},getDefaultDateTime:function(){var t=new Date,e=t.getTime()-6048e5,a=t.getTime(),i=new Date(e),n=new Date(a);return e=i.getFullYear()+"-"+(i.getMonth()+1>=10?i.getMonth()+1:"0"+(i.getMonth()+1))+"-"+(i.getDate()>=10?i.getDate():"0"+i.getDate()),a=n.getFullYear()+"-"+(n.getMonth()+1>=10?n.getMonth()+1:"0"+(n.getMonth()+1))+"-"+(n.getDate()>=10?n.getDate():"0"+n.getDate()),[e,a]}}},_=v,g=(a("78ca"),Object(h["a"])(_,i,n,!1,null,null,null));e["default"]=g.exports}}]);